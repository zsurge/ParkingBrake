C51 COMPILER V9.59.0.0   BUZZ                                                              11/19/2019 17:35:35 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE BUZZ
OBJECT MODULE PLACED IN ..\HEX\buzz.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ..\SCR\buzz.c OPTIMIZE(9,SPEED) BROWSE INCDIR(..\INC) DEBUG OBJECTEXTEND
                    - PRINT(.\buzz.lst) OBJECT(..\HEX\buzz.obj)

line level    source

   1          /****************************************************************************
   2          * File:                 buzz.c                                                                                                          *
   3          * Created:              2015-02-13                                                                                                      *
   4          * Last Change:                                                                                                                          *
   5          * Author:               chen zhi peng                                                                                           *
   6          * Description:                                                                                                                          *
   7          ****************************************************************************/
   8          #include "buzz.h"
   9          
  10          u8 xdata BuzzMode;
  11          u8 data  BuzzNum;
  12          
  13          
  14          
  15          void Buzz_clk()
  16          {
  17   1              if ( BuzzNum>10 )
  18   1              {
  19   2                      BuzzNum--;
  20   2              }
  21   1      }
  22          
  23          
  24          void intBuzz()
  25          {
  26   1              BuzzMode=BUZZ_NA;
  27   1              BuzzNum=0;
  28   1              BUZZ=BUZZ_CL;
  29   1      }
  30          
  31          //********************************************************************************************************
             -****//
  32          //buzz_task蜂鸣器任务
  33          //********************************************************************************************************
             -****//
  34          void Buzz_task ( u8 mode )
  35          {
  36   1              if ( BuzzMode!=mode )
  37   1              {
  38   2                      BuzzMode=mode;
  39   2                      BuzzNum=0;
  40   2              }
  41   1              switch ( BuzzMode )
  42   1              {
  43   2                      case BUZZ_NA:
  44   2                              BuzzNum=0;
  45   2                              BUZZ=BUZZ_CL;
  46   2                              break;
  47   2      
  48   2                      case BUZZ_B:                    //哔(只响一声，用于按键操作)
  49   2                              switch ( BuzzNum )
  50   2                              {
  51   3                                      case 10:
  52   3                                              BuzzNum=0;
C51 COMPILER V9.59.0.0   BUZZ                                                              11/19/2019 17:35:35 PAGE 2   

  53   3                                              BuzzMode=BUZZ_NA;
  54   3                                              BUZZ=BUZZ_CL;
  55   3                                              break;
  56   3                                      case 0:
  57   3                                              BuzzNum=16;
  58   3                                              BUZZ=BUZZ_EN;
  59   3                                              break;
  60   3                                      default:
  61   3                                              break;
  62   3                              }
  63   2                              break;
  64   2      
  65   2                      case BUZZ_BB:                   //哔哔(只响两声，用于按键操作)
  66   2                              switch ( BuzzNum )
  67   2                              {
  68   3                                      case 22:
  69   3                                              BUZZ=BUZZ_CL;
  70   3                                              break;
  71   3                                      case 16:
  72   3                                              BUZZ=BUZZ_EN;
  73   3                                              break;
  74   3                                      case 10:
  75   3                                              BuzzNum=0;
  76   3                                              BuzzMode=BUZZ_NA;
  77   3                                              BUZZ=BUZZ_CL;
  78   3                                              break;
  79   3                                      case 0:
  80   3                                              BuzzNum=28;
  81   3                                              BUZZ=BUZZ_EN;
  82   3                                              break;
  83   3                                      default:
  84   3                                              break;
  85   3                              }
  86   2                              break;
  87   2      
  88   2                      case BUZZ_BB_B:
  89   2                              switch ( BuzzNum )
  90   2                              {
  91   3                                      case 30:
  92   3                                              BUZZ=BUZZ_CL;
  93   3                                              break;
  94   3                                      case 20:
  95   3                                              BUZZ=BUZZ_EN;
  96   3                                              break;
  97   3                                      case 10:
  98   3                                              BuzzNum=0;
  99   3                                              BuzzMode=BUZZ_NA;
 100   3                                              BUZZ=BUZZ_CL;
 101   3                                              break;
 102   3                                      case 0:
 103   3                                              BuzzNum=130;
 104   3                                              BUZZ=BUZZ_EN;
 105   3                                              break;
 106   3                                      default:
 107   3                                              break;
 108   3                              }
 109   2                              break;
 110   2      
 111   2                      case BUZZ_BB_B_B:
 112   2                              switch ( BuzzNum )
 113   2                              {
 114   3                                      case 50:
C51 COMPILER V9.59.0.0   BUZZ                                                              11/19/2019 17:35:35 PAGE 3   

 115   3                                              BUZZ=BUZZ_CL;
 116   3                                              break;
 117   3                                      case 40:
 118   3                                              BUZZ=BUZZ_EN;
 119   3                                              break;
 120   3                                      case 30:
 121   3                                              BUZZ=BUZZ_CL;
 122   3                                              break;
 123   3                                      case 20:
 124   3                                              BUZZ=BUZZ_EN;
 125   3                                              break;
 126   3                                      case 10:
 127   3                                              BuzzNum=0;
 128   3                                              BuzzMode=BUZZ_NA;
 129   3                                              BUZZ=BUZZ_CL;
 130   3                                              break;
 131   3                                      case 0:
 132   3                                              BuzzNum=150;
 133   3                                              BUZZ=BUZZ_EN;
 134   3                                              break;
 135   3                                      default:
 136   3                                              break;
 137   3                              }
 138   2                              break;
 139   2      
 140   2                      case BUZZ_BB_B_B_B:
 141   2                              switch ( BuzzNum )
 142   2                              {
 143   3                                      case 70:
 144   3                                              BUZZ=BUZZ_CL;
 145   3                                              break;
 146   3                                      case 60:
 147   3                                              BUZZ=BUZZ_EN;
 148   3                                              break;
 149   3                                      case 50:
 150   3                                              BUZZ=BUZZ_CL;
 151   3                                              break;
 152   3                                      case 40:
 153   3                                              BUZZ=BUZZ_EN;
 154   3                                              break;
 155   3                                      case 30:
 156   3                                              BUZZ=BUZZ_CL;
 157   3                                              break;
 158   3                                      case 20:
 159   3                                              BUZZ=BUZZ_EN;
 160   3                                              break;
 161   3                                      case 10:
 162   3                                              BuzzNum=0;
 163   3                                              BuzzMode=BUZZ_NA;
 164   3                                              BUZZ=BUZZ_CL;
 165   3                                              break;
 166   3                                      case 0:
 167   3                                              BuzzNum=170;
 168   3                                              BUZZ=BUZZ_EN;
 169   3                                              break;
 170   3                                      default:
 171   3                                              break;
 172   3                              }
 173   2                              break;
 174   2      
 175   2                      case BUZZ_BB_BB:
 176   2                              switch ( BuzzNum )
C51 COMPILER V9.59.0.0   BUZZ                                                              11/19/2019 17:35:35 PAGE 4   

 177   2                              {
 178   3                                      case 122:
 179   3                                              BUZZ=BUZZ_CL;
 180   3                                              break;
 181   3                                      case 110:
 182   3                                              BUZZ=BUZZ_EN;
 183   3                                              break;
 184   3                                      case 10:
 185   3                                              BuzzNum=0;
 186   3                                              BuzzMode=BUZZ_NA;
 187   3                                              BUZZ=BUZZ_CL;
 188   3                                              break;
 189   3                                      case 0:
 190   3                                              BuzzNum=222;
 191   3                                              BUZZ=BUZZ_EN;
 192   3                                              break;
 193   3                                      default:
 194   3                                              break;
 195   3                              }
 196   2                              break;
 197   2      
 198   2                      case BUZZ_BBB:                  //哔哔(只响三声，用于按键操作)
 199   2                              switch ( BuzzNum )
 200   2                              {
 201   3                                      case 34:
 202   3                                              BUZZ=BUZZ_CL;
 203   3                                              break;
 204   3                                      case 28:
 205   3                                              BUZZ=BUZZ_EN;
 206   3                                              break;
 207   3                                      case 22:
 208   3                                              BUZZ=BUZZ_CL;
 209   3                                              break;
 210   3                                      case 16:
 211   3                                              BUZZ=BUZZ_EN;
 212   3                                              break;
 213   3                                      case 10:
 214   3                                              BuzzNum=0;
 215   3                                              BuzzMode=BUZZ_NA;
 216   3                                              BUZZ=BUZZ_CL;
 217   3                                              break;
 218   3                                      case 0:
 219   3                                              BuzzNum=40;
 220   3                                              BUZZ=BUZZ_EN;
 221   3                                              break;
 222   3                                      default:
 223   3                                              break;
 224   3                              }
 225   2                              break;
 226   2      
 227   2                      case BUZZ_B02:                  //哔~~~200毫秒
 228   2                              switch ( BuzzNum )
 229   2                              {
 230   3                                      case 16:
 231   3                                              BUZZ=BUZZ_CL;
 232   3                                              break;
 233   3                                      case 10:
 234   3                                      case 1:
 235   3                                      case 0:
 236   3                                              BuzzNum=22;
 237   3                                              BUZZ=BUZZ_EN;
 238   3                                              break;
C51 COMPILER V9.59.0.0   BUZZ                                                              11/19/2019 17:35:35 PAGE 5   

 239   3                                      default:
 240   3                                              break;
 241   3                              }
 242   2                              break;
 243   2      
 244   2                      case BUZZ_B2:                   //哔~~~~2秒频率
 245   2                              switch ( BuzzNum )
 246   2                              {
 247   3                                      case 195:
 248   3                                              BUZZ=BUZZ_CL;
 249   3                                              break;
 250   3                                      case 10:
 251   3                                      case 1:
 252   3                                      case 0:
 253   3                                              BuzzNum=200;
 254   3                                              BUZZ=BUZZ_EN;
 255   3                                              break;
 256   3                                      default:
 257   3                                              break;
 258   3                              }
 259   2                              break;
 260   2      
 261   2                      case BUZZ_BB2:                  //哔哔~~~2秒频率
 262   2                              switch ( BuzzNum )
 263   2                              {
 264   3                                      case 196:
 265   3                                              BUZZ=BUZZ_CL;
 266   3                                              break;
 267   3                                      case 192:
 268   3                                              BUZZ=BUZZ_EN;
 269   3                                              break;
 270   3                                      case 188:
 271   3                                              BUZZ=BUZZ_CL;
 272   3                                              break;
 273   3                                      case 10:
 274   3                                      case 1:
 275   3                                      case 0:
 276   3                                              BuzzNum=200;
 277   3                                              BUZZ=BUZZ_EN;
 278   3                                              break;
 279   3                                      default:
 280   3                                              break;
 281   3                              }
 282   2                              break;
 283   2      
 284   2                      case BUZZ_BBB2:                 //哔哔哔~~~~2秒频率
 285   2                              switch ( BuzzNum )
 286   2                              {
 287   3                                      case 196:
 288   3                                              BUZZ=BUZZ_CL;
 289   3                                              break;
 290   3                                      case 192:
 291   3                                              BUZZ=BUZZ_EN;
 292   3                                              break;
 293   3                                      case 188:
 294   3                                              BUZZ=BUZZ_CL;
 295   3                                              break;
 296   3                                      case 184:
 297   3                                              BUZZ=BUZZ_EN;
 298   3                                              break;
 299   3                                      case 180:
 300   3                                              BUZZ=BUZZ_CL;
C51 COMPILER V9.59.0.0   BUZZ                                                              11/19/2019 17:35:35 PAGE 6   

 301   3                                              break;
 302   3                                      case 10:
 303   3                                      case 1:
 304   3                                      case 0:
 305   3                                              BuzzNum=200;
 306   3                                              BUZZ=BUZZ_EN;
 307   3                                              break;
 308   3                                      default:
 309   3                                              break;
 310   3                              }
 311   2                              break;
 312   2      
 313   2                      case BUZZ_B_B:                  //哔(长鸣1秒)~~~~哔
 314   2                              switch ( BuzzNum )
 315   2                              {
 316   3                                      case 180:
 317   3                                              BUZZ=BUZZ_CL;
 318   3                                              break;
 319   3                                      case 160:
 320   3                                              BUZZ=BUZZ_EN;
 321   3                                              break;
 322   3                                      case 155:
 323   3                                              BUZZ=BUZZ_CL;
 324   3                                              break;
 325   3                                      case 10:
 326   3                                      case 1:
 327   3                                      case 0:
 328   3                                              BuzzNum=250;
 329   3                                              BUZZ=BUZZ_EN;
 330   3                                              break;
 331   3                                      default:
 332   3                                              break;
 333   3                              }
 334   2                              break;
 335   2      
 336   2                      case BUZZ_B_BB:                 //哔(长鸣1秒)~~~~哔哔
 337   2                              switch ( BuzzNum )
 338   2                              {
 339   3                                      case 180:
 340   3                                              BUZZ=BUZZ_CL;
 341   3                                              break;
 342   3                                      case 160:
 343   3                                              BUZZ=BUZZ_EN;
 344   3                                              break;
 345   3                                      case 155:
 346   3                                              BUZZ=BUZZ_CL;
 347   3                                              break;
 348   3                                      case 150:
 349   3                                              BUZZ=BUZZ_EN;
 350   3                                              break;
 351   3                                      case 145:
 352   3                                              BUZZ=BUZZ_CL;
 353   3                                              break;
 354   3                                      case 10:
 355   3                                      case 1:
 356   3                                      case 0:
 357   3                                              BuzzNum=250;
 358   3                                              BUZZ=BUZZ_EN;
 359   3                                              break;
 360   3                                      default:
 361   3                                              break;
 362   3                              }
C51 COMPILER V9.59.0.0   BUZZ                                                              11/19/2019 17:35:35 PAGE 7   

 363   2                              break;
 364   2      
 365   2                      case BUZZ_B_BBB:                //哔(长鸣1秒)~~~~哔哔哔
 366   2                              switch ( BuzzNum )
 367   2                              {
 368   3                                      case 180:
 369   3                                              BUZZ=BUZZ_CL;
 370   3                                              break;
 371   3                                      case 160:
 372   3                                              BUZZ=BUZZ_EN;
 373   3                                              break;
 374   3                                      case 155:
 375   3                                              BUZZ=BUZZ_CL;
 376   3                                              break;
 377   3                                      case 150:
 378   3                                              BUZZ=BUZZ_EN;
 379   3                                              break;
 380   3                                      case 145:
 381   3                                              BUZZ=BUZZ_CL;
 382   3                                              break;
 383   3                                      case 140:
 384   3                                              BUZZ=BUZZ_EN;
 385   3                                              break;
 386   3                                      case 135:
 387   3                                              BUZZ=BUZZ_CL;
 388   3                                              break;
 389   3                                      case 10:
 390   3                                      case 1:
 391   3                                      case 0:
 392   3                                              BuzzNum=250;
 393   3                                              BUZZ=BUZZ_EN;
 394   3                                              break;
 395   3                                      default:
 396   3                                              break;
 397   3                              }
 398   2                              break;
 399   2      
 400   2                      default:
 401   2                              BuzzMode=BUZZ_NA;
 402   2                              BuzzNum=0;
 403   2                              break;  //蜂鸣器相关变量初始化
 404   2      
 405   2              }
 406   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    704    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      1    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
