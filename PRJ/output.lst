C51 COMPILER V9.59.0.0   OUTPUT                                                            11/19/2019 17:35:36 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE OUTPUT
OBJECT MODULE PLACED IN ..\HEX\output.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ..\SCR\output.c OPTIMIZE(9,SPEED) BROWSE INCDIR(..\INC) DEBUG OBJECTEXTE
                    -ND PRINT(.\output.lst) OBJECT(..\HEX\output.obj)

line level    source

   1          /****************************************************************************
   2          * File:                 Output.c                                                                                                        *
   3          * Created:              2015-07-13                                                                                                      *
   4          * Last Change:                                                                                                                          *
   5          * Author:               chen zhi peng                                                                                           *
   6          * Description:  输出控制                                                                                                        *
   7          ****************************************************************************/
   8          #include "Output.h"
   9          
  10          u8 data DZPnum;
  11          u8 data DlyBrakeNum;
  12          u16 data BrakeNum;
  13          u8 data BrakeSta;
  14          
  15          void intOut()
  16          {
  17   1              DZPnum=0;
  18   1              DlyBrakeNum=0;
  19   1              BrakeNum=0;
  20   1              BrakeSta=0;
  21   1      }
  22          void DZP_clk()
  23          {
  24   1              if ( DZPnum )
  25   1              {
  26   2                      DZPnum--;    //道闸反馈信号时钟
  27   2              }
  28   1      }
  29          void BrakeClk()
  30          {
  31   1              if ( BrakeNum )
  32   1              {
  33   2                      BrakeNum--;
  34   2              }
  35   1              if ( DlyBrakeNum )
  36   1              {
  37   2                      DlyBrakeNum--;
  38   2              }
  39   1      }
  40          
  41          
  42          void BrakeClr()
  43          {
  44   1              KK=1;
  45   1              BrakeNum=0;
  46   1              DlyBrakeNum=0;
  47   1              BrakeSta=0;
  48   1      }
  49          
  50          void OPutTask()
  51          {
  52   1              if ( mTask== MTASK_UP1 )
  53   1              {
  54   2                      RG= KK_GRE;
C51 COMPILER V9.59.0.0   OUTPUT                                                            11/19/2019 17:35:36 PAGE 2   

  55   2      //              if ( !BM3 && ( iTask==ITASK_DG_UP || iTask==ITASK_FZ_UP || iTask==ITASK_DRAG_UP || iTask== ITASK_INER_
             -DW ) )
  56   2              //modify 2019.04 19 张舵
  57   2              //这里不需要BM3来判定，只要是非常规抬闸都不截图
  58   2                      if ( ( iTask==ITASK_DG_UP || iTask==ITASK_FZ_UP || iTask==ITASK_DRAG_UP || iTask== ITASK_INER_DW ) )
  59   2                      {
  60   3                              DZP_CL;
  61   3                      }
  62   2                      else
  63   2                      {
  64   3                              DZP_UP;
  65   3                      }
  66   2                      DZPnum=DZP_TIME;
  67   2              }
  68   1              else if ( mTask== MTASK_DW1 )
  69   1              {
  70   2                      RG= KK_RED;
  71   2                      DZP_DW;
  72   2                      DZPnum= DZP_TIME;
  73   2              }
  74   1              else if ( !DZPnum )
  75   1              {
  76   2                      if ( gRepairMotor.OutFlag )
  77   2                      {
  78   3                              DZP_ER;
  79   3                      }
  80   2                      else
  81   2                      {
  82   3                              DZP_CL;
  83   3                      }
  84   2              }
  85   1      
  86   1              switch ( BrakeSta )
  87   1              {
  88   2                      case 0:
  89   2                              if ( mTask/10==MTASK_DS || mTask/10==MTASK_US )
  90   2                              {
  91   3                                      DlyBrakeNum=DLYBRAKETIME;
  92   3                                      BrakeSta++;
  93   3                              }
  94   2                              break;
  95   2      
  96   2                      case 1:
  97   2                              if ( !DlyBrakeNum )
  98   2                              {
  99   3                                      KK=0;
 100   3                                      BrakeNum=BRAKETIME;
 101   3                                      BrakeSta++;
 102   3                              }
 103   2                              break;
 104   2      
 105   2                      case 2:
 106   2                              if ( !BrakeNum )
 107   2                              {
 108   3                                      KK=1;
 109   3                                      BrakeSta++;
 110   3                              }
 111   2                              break;
 112   2      
 113   2                      case 3:
 114   2                              break;
 115   2      
C51 COMPILER V9.59.0.0   OUTPUT                                                            11/19/2019 17:35:36 PAGE 3   

 116   2                      default:
 117   2                              break;
 118   2              }
 119   1      }
 120          
 121          
 122          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    199    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
